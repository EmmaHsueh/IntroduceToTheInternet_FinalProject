# 智慧配對系統使用指南

## 📌 功能概述

「智慧配對系統」是專為師大國際生設計的 AI 配對功能，能根據用戶的個人資料、興趣、學習需求等資訊，智能推薦最合適的語言交換夥伴、學習小組、室友或文化體驗夥伴。

---

## 🎯 四大配對類型

### 1. 🗣️ 語言交換配對 (Language Exchange)
**目的：** 找到母語互補的夥伴，互相練習語言

**配對依據：**
- **語言需求互補** (權重 40%) - 你的母語是對方想學的，對方的母語是你想學的
- **語言程度匹配** (權重 20%) - 相似的語言水平更容易溝通
- **共同興趣** (權重 20%) - 有共同話題才能聊得來
- **時間重疊** (權重 20%) - 確保雙方有時間見面練習

**使用場景：**
- 國際生想練習中文 ↔ 台灣學生想練習英文
- 互相糾正發音、學習日常用語
- 定期語言交換聚會

---

### 2. 📚 學習夥伴配對 (Study Buddy)
**目的：** 找到修讀相同課程或相同科系的讀書夥伴

**配對依據：**
- **科系相同** (權重 30%) - 相同領域更容易互相幫助
- **共同課程** (權重 25%) - 可以一起討論作業、準備考試
- **學習習慣** (權重 20%) - 早起型 vs 夜貓子、圖書館 vs 咖啡廳
- **可用時間** (權重 15%) - 確保能約到時間一起讀書
- **共同興趣** (權重 10%) - 休息時間有話題

**使用場景：**
- 期中/期末考前組讀書會
- 專題研究找組員
- 互相督促完成作業

---

### 3. 🏠 室友配對 (Roommate Finder)
**目的：** 找到生活習慣契合的理想室友

**配對依據：**
- **租金預算** (權重 25%) - 相近的預算範圍
- **作息習慣** (權重 25%) - 早睡早起 vs 熬夜晚睡
- **生活習慣** (權重 20%) - 整潔度、是否抽菸、是否養寵物等
- **性別偏好** (權重 15%) - 尊重性別偏好設定
- **共同興趣** (權重 15%) - 室友也可以是朋友

**使用場景：**
- 剛來台灣的國際生找室友
- 宿舍申請不到，需要在外租屋
- 想換室友，找更合得來的人

---

### 4. 🌏 文化體驗配對 (Cultural Exchange)
**目的：** 國際生與本地生互相交流，體驗不同文化

**配對依據：**
- **國際生 ↔ 本地生優先配對** (權重 30%) - 確保文化差異
- **文化興趣匹配** (權重 30%) - 對台灣文化/國際文化的興趣
- **活動偏好** (權重 20%) - 爬山、看展、夜市、博物館等
- **可用時間** (權重 10%) - 確保能一起參加活動
- **共同興趣** (權重 10%) - 增加聊天話題

**使用場景：**
- 國際生想了解台灣傳統節慶（農曆新年、端午、中秋）
- 本地生想認識不同國家的文化
- 一起參加文化活動、美食探索

---

## 🛠️ 如何使用配對系統

### 步驟 1：完善個人資料
配對演算法需要以下資訊才能提供精準配對：

**必填資訊：**
- 姓名/暱稱
- 科系
- 性別

**建議填寫（提升配對準確度）：**
- 母語 (nativeLanguage)
- 想學習的語言 (learningLanguage)
- 語言程度 (languageLevel: beginner/intermediate/advanced)
- 興趣 (interests: 陣列，如 ['閱讀', '運動', '電影'])
- 可用時間 (availability: ['週一晚上', '週末下午'])
- 修讀課程 (courses: ['微積分', '程式設計'])
- 學習習慣 (studyHabits: ['早起', '圖書館', '安靜環境'])
- 租金預算 (budgetRange: 'low'/'medium'/'high')
- 作息 (sleepSchedule: 'earlyBird'/'nightOwl'/'normal')
- 生活偏好 (lifestylePreferences: ['整潔', '不抽菸', '喜歡安靜'])
- 室友性別偏好 (roommateGenderPreference: 'male'/'female'/'any')
- 是否為國際生 (isInternationalStudent: true/false)
- 文化興趣 (culturalInterests: ['台灣美食', '傳統節慶', '茶文化'])
- 活動偏好 (activityPreferences: ['戶外活動', '博物館', '夜市'])

**前往編輯個人資料：**
1. 點擊右上角頭像
2. 選擇「編輯個人資料」
3. 填寫相關資訊
4. 儲存

---

### 步驟 2：選擇配對類型
1. 前往「智慧配對」頁面 (`/matching`)
2. 查看四種配對類型的說明
3. 點擊想要的配對類型卡片

---

### 步驟 3：查看配對結果
- 系統會顯示配對度 > 30% 的用戶
- 結果依**配對度**由高到低排序
- 每個配對卡片會顯示：
  - 配對度百分比
  - 用戶基本資訊（暱稱、科系、性別）
  - 配對原因（為什麼推薦這位用戶）

---

### 步驟 4：查看詳細資料
- 點擊「查看詳細資料」按鈕
- 會跳轉到該用戶的公開個人檔案頁面
- 可以查看更多資訊並決定是否聯繫

---

## 🧮 配對演算法說明

### 配對度計算方式
- 每個配對類型有不同的評分標準
- 總分 100 分，根據多個維度加權計算
- 只有配對度 >= 30 分的用戶會被推薦

### 範例：語言交換配對
```javascript
用戶 A: 母語中文，想學英文，中級程度
用戶 B: 母語英文，想學中文，中級程度

評分：
- 語言需求完美互補：+40 分
- 語言程度相同：+20 分
- 有 2 個共同興趣：+10 分
- 有 3 個重疊時間段：+15 分

總分：85 分 (高度匹配！)
```

---

## 📊 資料結構範例

### Firestore 用戶資料範例
```javascript
{
  uid: "user123",
  email: "student@example.com",
  nickname: "小明",
  department: "資訊工程系",
  gender: "male",

  // 語言交換相關
  nativeLanguage: "zh",
  learningLanguage: "en",
  languageLevel: "intermediate",

  // 興趣與時間
  interests: ["運動", "電影", "旅遊"],
  availability: ["週一晚上", "週三下午", "週末"],

  // 學習相關
  courses: ["資料結構", "演算法"],
  studyHabits: ["早起", "圖書館", "喜歡討論"],

  // 室友配對相關
  budgetRange: "medium",
  sleepSchedule: "earlyBird",
  lifestylePreferences: ["整潔", "不抽菸", "安靜"],
  roommateGenderPreference: "any",

  // 文化交流相關
  isInternationalStudent: false,
  culturalInterests: ["日本文化", "韓國美食"],
  activityPreferences: ["爬山", "看展", "咖啡廳"]
}
```

---

## 🔧 技術實作

### 檔案結構
```
src/
├── pages/
│   └── MatchingPage.js          # 智慧配對主頁面
├── services/
│   └── matchingService.js       # 配對演算法核心邏輯
└── components/
    └── Header.js                # 導航欄 (已更新連結)
```

### 核心函數

**1. matchLanguageExchange(userProfile, allUsers)**
- 語言交換配對演算法
- 返回排序後的配對結果

**2. matchStudyBuddyOrRoommate(userProfile, allUsers, matchType)**
- 學習夥伴 / 室友配對演算法
- matchType: 'study' 或 'roommate'

**3. matchCulturalExperience(userProfile, allUsers)**
- 文化體驗配對演算法

**4. updateMatchingPreferences(userId, preferences)**
- 儲存用戶配對偏好到 Firestore

**5. sendMatchInvitation(fromUserId, toUserId, matchType, message)**
- 發送配對邀請 (未來功能)

---

## 🚀 未來改進方向

### 1. 即時通訊功能
- 配對成功後可以直接在平台上聊天
- 不需要交換 Email 或其他聯絡方式

### 2. 配對邀請系統
- 向配對對象發送邀請
- 對方接受後才交換聯絡方式
- 避免騷擾問題

### 3. 配對歷史紀錄
- 儲存用戶的配對歷史
- 可以查看過去配對過的人
- 評分系統（配對後給予評價）

### 4. 進階篩選條件
- 手動設定篩選條件（如：只看特定科系、特定語言）
- 距離篩選（根據位置找附近的人）

### 5. 配對成功率追蹤
- 追蹤有多少配對真正見面/互動
- 根據成功率調整演算法權重

### 6. 推薦系統優化
- 根據用戶行為（點擊、聯繫）優化推薦
- 機器學習模型預測配對成功率

---

## ❓ FAQ

**Q: 如果找不到配對怎麼辦？**
A: 建議完善個人資料，特別是興趣、可用時間、語言能力等。資料越完整，配對越精準。

**Q: 配對度多少才算合適？**
A:
- 70分以上：高度匹配，強烈推薦
- 50-70分：中度匹配，值得嘗試
- 30-50分：低度匹配，可能有部分契合

**Q: 如何聯繫配對對象？**
A: 目前需要查看對方公開資料頁面，未來會加入站內訊息功能。

**Q: 配對演算法會學習嗎？**
A: 目前是基於規則的演算法，未來計劃加入機器學習模型。

**Q: 我的資料會被公開嗎？**
A: 只有你允許公開的資料才會被看到，可在個人資料頁面設定隱私權限。

---
🎯 完成的功能

  1. 四大配對類型

  🗣️ 語言交換配對 (Language Exchange)

  - 母語互補配對（中文 ↔ 英文）
  - 語言程度匹配
  - 共同興趣篩選
  - 時間彈性安排

  📚 學習夥伴配對 (Study Buddy)

  - 相同科系優先
  - 共同課程媒合
  - 學習習慣匹配（早起型 vs 夜貓子）
  - 專題合作夥伴

  🏠 室友配對 (Roommate Finder)

  - 租金預算匹配
  - 作息習慣相符
  - 生活方式契合（整潔度、抽菸、寵物）
  - 性別偏好設定

  🌏 文化體驗配對 (Cultural Exchange)

  - 國際生 ↔ 本地生自動配對
  - 文化活動揪團
  - 美食探索夥伴
  - 節慶體驗分享

  ---
  💻 技術實作

  新建檔案：

  1. src/services/matchingService.js - 配對演算法核心
    - matchLanguageExchange() - 語言交換配對
    - matchStudyBuddyOrRoommate() - 學習夥伴/室友配對
    - matchCulturalExperience() - 文化體驗配對
    - 智能評分系統（加權計算配對度 0-100%）
  2. src/pages/MatchingPage.js - 全新的配對系統頁面
    - 精美的配對類型選擇卡片
    - 配對結果展示（含配對度進度條）
    - 配對原因說明
    - 響應式設計
  3. MATCHING_SYSTEM_GUIDE.md - 完整使用指南文檔

  更新檔案：

  1. src/App.js - 新增 /matching 路由
  2. src/components/Header.js - 導航欄更新為「智慧配對」
  3. src/pages/HomePage.js - 首頁功能卡片連結更新

  ---
  🎨 UI/UX 設計亮點

  配對類型選擇頁

  - 4 張精美卡片，每張都有：
    - 大圖示 emoji
    - 雙語標題（中英文）
    - 功能特色列表（打勾符號）
    - 獨特的主題色（紅橙綠藍）
    - Hover 動畫效果（上浮 + 邊框高亮）

  配對結果頁

  - 配對度視覺化進度條：
    - 70%+ 綠色（高度匹配）
    - 50-70% 黃色（中度匹配）
    - 30-50% 橙色（低度匹配）
  - 配對原因清單（最多顯示 3 條）
  - 用戶頭像 + 基本資訊
  - 「查看詳細資料」按鈕 → 跳轉到公開個人檔案

  ---
  🧮 配對演算法說明

  評分機制範例（語言交換）：

  總分 100 分 =
    語言需求互補 (40%) +
    語言程度匹配 (20%) +
    共同興趣 (20%) +
    時間重疊 (20%)

  只推薦配對度 ≥ 30 分的用戶

  智能配對原因生成：

  系統會自動分析並生成配對原因，例如：
  - "你的母語中文是對方想學習的語言"
  - "相同科系：資訊工程系"
  - "共同興趣：運動、電影、旅遊"
  - "本地生可以帶你體驗台灣文化"

  ---
  📊 資料結構設計

  用戶需要在個人資料中填寫以下欄位（配對演算法會用到）：

  語言交換相關：

  - nativeLanguage: 母語 (例: 'zh', 'en', 'ja')
  - learningLanguage: 想學習的語言
  - languageLevel: 語言程度 ('beginner', 'intermediate', 'advanced')

  學習相關：

  - department: 科系
  - courses: 修讀課程 (陣列)
  - studyHabits: 學習習慣 (陣列)

  室友配對相關：

  - budgetRange: 租金預算 ('low', 'medium', 'high')
  - sleepSchedule: 作息 ('earlyBird', 'nightOwl', 'normal')
  - lifestylePreferences: 生活偏好 (陣列)
  - roommateGenderPreference: 室友性別偏好 ('male', 'female', 'any')

  文化交流相關：

  - isInternationalStudent: 是否為國際生 (boolean)
  - culturalInterests: 文化興趣 (陣列)
  - activityPreferences: 活動偏好 (陣列)

  共用欄位：

  - interests: 興趣 (陣列)
  - availability: 可用時間 (陣列)

  ---
  🚀 如何測試

  步驟 1：啟動專案

  npm start

  步驟 2：訪問配對系統

  打開瀏覽器，前往：
  - 首頁：http://localhost:3000/
  - 智慧配對：http://localhost:3000/matching

  步驟 3：體驗配對流程

  1. 點擊導航欄「智慧配對」
  2. 選擇任一配對類型卡片（如「語言交換」）
  3. 查看配對結果（目前可能為空，因為需要完善用戶資料）
  4. 點擊「查看詳細資料」查看用戶檔案

  ---
  💡 差異化優勢

  與一般交流平台相比，你的「智慧配對系統」有以下獨特性：

  | 特色   | 傳統論壇    | 你的平台               |
  |------|---------|--------------------|
  | 配對方式 | 手動搜尋/瀏覽 | AI 智能推薦            |
  | 精準度  | 靠運氣     | 多維度加權計算            |
  | 配對類型 | 單一功能    | 4 種場景（語言/學習/室友/文化） |
  | 配對原因 | 不透明     | 清楚說明配對理由           |
  | 視覺化  | 文字列表    | 配對度進度條 + 精美卡片      |
  | 目標受眾 | 泛用      | 專為師大國際生設計          |

  ---
  🎯 下一步建議

  如果你想進一步完善配對系統，可以加入：

  1. 用戶資料完善提示 - 如果用戶資料不完整，引導他們去填寫
  2. 配對邀請功能 - 加入「發送配對邀請」按鈕
  3. 站內訊息系統 - 配對成功後直接聊天
  4. 配對成功追蹤 - 紀錄有多少配對真正互動
  5. 推薦優化 - 根據用戶點擊行為調整演算法

  ---
  ✨ 總結

  你的「師聲 NTNU Voice」平台現在擁有：
  - ✅ 精美的首頁（雙語支援、功能卡片、即時動態）
  - ✅ 全新的智慧配對系統（4 種配對類型、AI 演算法）
  - ✅ 多主題看板 + 即時聊天
  - ✅ AI 聊天助手
  - ✅ 活動地圖
  - ✅ 會員系統
